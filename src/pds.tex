\documentclass[reqno,heading=true,fontset=macnew]{ctexbook}



\usepackage{amssymb}
\usepackage{latexsym}



% algorithm
\usepackage{algpseudocode}
\usepackage[section]{algorithm}
\usepackage{algorithmicx}
\usepackage[colorlinks,linkcolor=red,anchorcolor=blue,citecolor=green]{hyperref}
\usepackage{tikz}
\usepackage{multirow}
\usepackage{float}

% math theorem, lemma, proof
\usepackage{amsthm}
%\theoremstyle{definition}
%\newtheorem{definition}{Definition}
%\newtheorem{theorem}{Theorem}

\usepackage{thmtools}
\declaretheorem{theorem}
\declaretheorem{definition}
\declaretheorem{example}
\declaretheorem{axiom}



% for mathematical integratoin
\usepackage{commath}


% for drawing beautiful math commutative diagram
% note:
%   it treat nodes as a matrix and use "&" to separate row and "\\" for line.
%   "'" change the label from above arrow to below arrow.
%   "l", "r" and "d" means move among matrix nodes.
\usepackage{tikz-cd}


% create index
\usepackage{mathtools}
\usepackage{makeidx}
\makeindex


\usepackage{listings}



% set font



%! TEX program = xelatex
\usepackage{fontspec}
%\setmainfont{PingFang SC}
%\setsansfont{Hiragino Sans GB}
%\setmonofont[Scale=0.9]{PingFang SC}
\usepackage{xeCJK}
%\setCJKmainfont{PingFang SC}
\setCJKmainfont{STKaiti}
\setCJKsansfont{PingFang SC}
\setCJKmonofont{PingFang SC}



% no space in itemize
\usepackage{enumitem}
\setenumerate{itemsep=0pt,partopsep=0pt,parsep=\parskip,topsep=2pt}
\setitemize{itemsep=0pt,partopsep=0pt,parsep=\parskip,topsep=2pt}
\setdescription{itemsep=0pt,partopsep=0pt,parsep=\parskip,topsep=2pt}


% set line space
\usepackage{setspace}



% set page size
\usepackage{geometry}
%\geometry{a4paper}
\geometry{a4paper,top=2cm,bottom=2cm,left=2.5cm,right=2cm}


% set programming code highlight
% \usepackage[chapter]{minted}


% setup bibtex
\usepackage{cite}


\usepackage{epigraph}



\newcommand\cindex[1]{\underline{#1}\index{#1}}


% set toc and section level
\setcounter{secnumdepth}{7}
\setcounter{tocdepth}{7}





% start of the document  
\begin{document}

\title{分布式系统原理}
\author{任杰}
\date{\today}

\maketitle
\tableofcontents


\chapter*{序}
\input{prelude/prelude}

\rightline{任杰}
\rightline{上海浦东}
\rightline{2020年5月}




%\setcounter{page}{1}

\chapter{基础概念}

\epigraph{A distributed system is one in which the failure of a computer you didn't even know existed can render your own computer unusable}{Leslie Lamport \\ Email message sent to a DEC SRC bulletin board at 12:23:29 PDT on 28 May 87.}
\input{intro/basics}




\chapter{时间}

\epigraph{I’m late, I’m late! For a very important date! No time to say ‘hello, goodbye’, I’m late, I’m late, I’m late!}{The White Rabbit \\ Alice's Adventures in Wonderland}

\input{time/physical.time}
\input{time/logical.time}



\chapter{一致性}
\section{顺序一致性}

\section{线性一致性}
\section{ACID}

\section{最终一致性}


\chapter{共识算法}
\section{定义}

\section{Raft}
\section{Paxos及其它}

\section{复制状态机}


\chapter{数据复制}
\section{同步复制}

\section{异步复制}

\section{Quorun}

\section{一致性复制}


\chapter{数据切割}
\section{切割原则}

\section{一致性哈希}


\chapter{混沌工程}

\chapter{分布式系统案例}

\section{TCP}
\section{DNS}

\section{CDN}

\section{Spanner}

\section{Kafka}







\bibliography{../../bibtex/library}{}
\bibliographystyle{alpha}


\printindex

\end{document}
